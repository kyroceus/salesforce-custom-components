<template>
  <div class="multi-select-container">
    <!-- input component -->
    <div class="multi-select-box">
      <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right input-box">
        <label class="slds-form-element__label">
          {label}
          <template if:true={required}>
            <abbr class="slds-required" title="required"> *</abbr>
          </template>
        </label>
        <input type="text" class="slds-input search-input" onclick={handleInputClick} placeholder={placeholder}
          aria-expanded={showDropdown} aria-controls="multiselect-dropdown" aria-haspopup="listbox"
          name={name} onkeyup={handleInputKeyUp} />
        <lightning-icon icon-name={iconName} alternative-text="open dropdown" size="xx-small"
          class="dropdown-icon" onclick={handleDropdownIconClick}>
        </lightning-icon>
      </div>
    </div>
    <!-- dropdown component -->
    <div class="dropdown-container" onclick={handleDropdownClick} if:true={showDropdown}>
      <ul class="dropdown-container__list" id="multiselect-dropdown">
        <template for:each={options} for:item="option" for:index="index">
          <li class="dropdown-container__list-item" key={option.value}
            onclick={handleListClick} data-index={index} data-value={option.value}>
            <div class="list-item_option" aria-label={option.label}>
              <div class="icon-container">
                <lightning-icon if:true={option.checked} icon-name="utility:check" alternative-text="checked" size="xx-small"></lightning-icon>
              </div>
              <span class="slds-media__body">
                <span class="slds-truncate">{option.label}</span>
              </span>
            </div>
          </li>
        </template>
      </ul>
    </div>
    <!-- pill components -->
    <div class="pill-container">
      <template for:each={values} for:item="value">
        <lightning-pill label={value} key={value} data-value={value} onremove={handleCrossIconClick}></lightning-pill>
      </template>
    </div>
  </div>
</template>