<template>
  <div class="lookup-container">
    <!-- input component -->
    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right input-box">
      <input class="slds-input" type="text" placeholder={placeholder} value={search}
        onkeyup={handleInputKeyUp} onclick={handleInputClick} />
      <!-- <svg if:false={selectedLabel} class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
        width="24" height="24">
        <use href={magnifierIcon}></use>
      </svg> -->
      <lightning-icon icon-name="utility:search" class="search-icon" alternative-text="open dropdown" size="xx-small"
        onclick={handleCrossIconClick}></lightning-icon>
      <div class="lookup-filled" if:true={selectedLabel}>
        {selectedLabel}
        <!-- <svg class="cross-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
          width="24" height="24" onclick={handleSelectedRecordClick}>
          <use href={blueCross}></use>
        </svg> -->
        <lightning-icon icon-name="utility:close" alternative-text="open dropdown" size="xx-small"
          class="dropdown-icon" onclick={handleCrossIconClick}></lightning-icon>
      </div>
    </div>
    <!-- dropdown component -->
    <div class="dropdown-container" onclick={handleDropdownClick} if:true={showDropdown}>
      <div class="lookup-spinner" if:true={loading}>
          <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
      </div>
      <ul class="dropdown-container__list" if:false={loading}>
          <template for:each={lookupResults} for:item="lookup">
              <li class="dropdown-container__list-item" 
                key={lookup.value}
                onclick={handleListClick}
                data-value={lookup.value} 
                data-label={lookup.label}
              >
                  {lookup.label}
              </li>    
          </template>
          <template if:true={noResults}>
              <li class="dropdown-container__list-item">
                  No results
              </li>
          </template>
      </ul>
    </div>
  </div>
</template>